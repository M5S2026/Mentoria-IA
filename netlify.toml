[build]
  publish = "dist"
  functions = "netlify/functions"
  command = "mkdir -p dist && rsync -a --include='index.html' --include='favicon*' --include='css/***' --include='js/***' --include='pages/***' --include='member/***' --include='images/***' --exclude='*' . dist/"

# Protect member area - users with paid-user role can access
[[redirects]]
  from = "/member/*"
  to = "/member/:splat"
  status = 200
  conditions = {Role = ["paid-user"]}
  force = true

# Users without role get redirected to login
[[redirects]]
  from = "/member/*"
  to = "/pages/login.html"
  status = 302
  force = true
